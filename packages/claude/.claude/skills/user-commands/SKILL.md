---
name: user-commands
description: Guide for using custom user commands. Explains available commands, when to use them, and recommended workflows for scrum, planning, goals, and code review.
allowed-tools: Read, Glob
---

# ユーザーコマンドガイド

dotfilesで管理されているカスタムコマンドの使い方とワークフロー。

---

## コマンド一覧

### /scrum:* - スクラム開発支援

| コマンド | 用途 | 入力例 |
|---------|------|--------|
| `/scrum:coach` | スクラムに関する相談 | `/scrum:coach リファインメントの頻度は？` |
| `/scrum:pbi-draft` | PBI案作成 | `/scrum:pbi-draft ユーザーがパスワードをリセットしたい` |
| `/scrum:spike` | ドメイン調査 | `/scrum:spike 決済APIの仕様` |
| `/scrum:retro` | レトロ準備 | `/scrum:retro Sprint 3` |
| `/scrum:adr` | 意思決定記録 | `/scrum:adr 認証方式の選定` |

### /plan:* - 計画立案支援

| コマンド | 用途 | 入力例 |
|---------|------|--------|
| `/plan:clarify` | 要件明確化（EnterPlanMode前） | `/plan:clarify ログイン機能の実装` |

### /goal:* - 個人目標管理

| コマンド | 用途 | 入力例 |
|---------|------|--------|
| `/goal:setup` | コンテキスト整理 | `/goal:setup` |
| `/goal:draft` | 目標作成 | `/goal:draft 2026-H1` |
| `/goal:review` | 月次振り返り | `/goal:review 2026-01` |
| `/goal:coach` | 目標相談 | `/goal:coach 組織貢献の具体例が知りたい` |

### /code:* - コードレビュー

| コマンド | 用途 | 入力例 |
|---------|------|--------|
| `/code:review-pr` | PRレビュー | `/code:review-pr` |
| `/code:review-uncommited` | 未コミット変更レビュー | `/code:review-uncommited` |
| `/code:review-unpushed` | 未プッシュコミットレビュー | `/code:review-unpushed` |

---

## ワークフロー

### 1. スクラム開発の週次サイクル

```
┌─────────────────────────────────────────────────────────────┐
│ 月曜: プランニング                                          │
│ ┌─────────────────────────────────────────────────────────┐│
│ │ Ready なPBIを選択 → タスク分解                          ││
│ │                                                         ││
│ │ 各PBIの実装時:                                          ││
│ │   /plan:clarify → EnterPlanMode → 実装                 ││
│ └─────────────────────────────────────────────────────────┘│
├─────────────────────────────────────────────────────────────┤
│ 水曜: リファインメント準備                                  │
│ ┌─────────────────────────────────────────────────────────┐│
│ │ ドメイン知識が不足 → /scrum:spike                       ││
│ │                ↓                                        ││
│ │ PBI案作成 → /scrum:pbi-draft                           ││
│ │                ↓                                        ││
│ │ リファインメントでチームと議論                          ││
│ └─────────────────────────────────────────────────────────┘│
├─────────────────────────────────────────────────────────────┤
│ 金曜: レトロ準備                                            │
│ ┌─────────────────────────────────────────────────────────┐│
│ │ /scrum:retro Sprint N                                   ││
│ │                ↓                                        ││
│ │ レトロスペクティブ実施                                  ││
│ └─────────────────────────────────────────────────────────┘│
├─────────────────────────────────────────────────────────────┤
│ 随時                                                        │
│ ┌─────────────────────────────────────────────────────────┐│
│ │ スクラムの疑問 → /scrum:coach                          ││
│ │ 重要な技術判断 → /scrum:adr                            ││
│ └─────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────┘
```

### 2. 実装タスクのフロー

```
タスク着手
    │
    ▼
/plan:clarify "機能Xを実装"
    │
    ├─ コードベース調査
    ├─ 要件の理解整理
    ├─ 粒度判定（Quick/Standard/Detailed）
    └─ 不明点を質問
    │
    ▼
ユーザーが回答・承認
    │
    ▼
EnterPlanMode（Claude Code標準機能）
    │
    └─ 判定された粒度で計画作成
    │
    ▼
実装
    │
    ▼
/code:review-uncommited（セルフレビュー）
    │
    ▼
コミット → プッシュ → PR作成
```

### 3. 個人目標の期間サイクル

```
┌─────────────────────────────────────────────────────────────┐
│ 期初（1回）                                                 │
│ ┌─────────────────────────────────────────────────────────┐│
│ │ /goal:setup                                             ││
│ │   └─ 自分のなりたい、会社の期待を整理                   ││
│ │                ↓                                        ││
│ │ /goal:draft 2026-H1                                     ││
│ │   └─ 3アプローチで目標作成                              ││
│ │                ↓                                        ││
│ │ 上司と1on1で共有・調整                                  ││
│ └─────────────────────────────────────────────────────────┘│
├─────────────────────────────────────────────────────────────┤
│ 毎月末                                                      │
│ ┌─────────────────────────────────────────────────────────┐│
│ │ /goal:review 2026-01                                    ││
│ │   └─ 進捗確認、軌道修正                                 ││
│ └─────────────────────────────────────────────────────────┘│
├─────────────────────────────────────────────────────────────┤
│ 随時                                                        │
│ ┌─────────────────────────────────────────────────────────┐│
│ │ /goal:coach                                             ││
│ │   └─ 悩み相談、壁打ち                                   ││
│ └─────────────────────────────────────────────────────────┘│
├─────────────────────────────────────────────────────────────┤
│ 期末                                                        │
│ ┌─────────────────────────────────────────────────────────┐│
│ │ current-period.md → archive/ に移動                     ││
│ │ 上司との評価面談                                        ││
│ └─────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────┘
```

### 4. コードレビューの使い分け

```
作業段階に応じて:

実装中（コミット前）
    └─ /code:review-uncommited
       「この変更、問題ないかな？」

コミット後（プッシュ前）
    └─ /code:review-unpushed
       「プッシュする前にチェック」

PR作成後
    └─ /code:review-pr
       「PRとして妥当かレビュー」
```

---

## シーン別コマンド選択

### 「何を作るか曖昧」な時

```
/scrum:spike → /scrum:pbi-draft
```

ドメイン知識を調査し、PBIとして定式化。

### 「どう実装するか」を考える時

```
/plan:clarify → EnterPlanMode
```

要件を明確化してから計画立案。

### 「スクラムのやり方」に迷った時

```
/scrum:coach
```

スクラムガイドに基づくアドバイス。

### 「キャリア・目標」に悩んだ時

```
/goal:coach
```

目標設定の壁打ち相手。

### 「技術的な決定」を記録したい時

```
/scrum:adr
```

後から「なぜこうなった？」を説明できるように。

---

## データ保存先

### ユーザーグローバル（~/.claude/）

個人に紐づくデータ。プロジェクト横断で利用。

```
~/.claude/goals/
├── context.md              # /goal:setup
├── current-period.md       # /goal:draft
└── reviews/*.md            # /goal:review
```

### プロジェクト固有（<project>/.claude/）

プロジェクトに紐づくデータ。プロジェクトルートの相対パス。

```
.claude/
├── docs/
│   └── adr/*.md                # /scrum:adr（開発手法非依存）
│
├── scrum/
│   ├── backlog/*.md            # /scrum:pbi-draft
│   ├── domain/*.md             # /scrum:spike
│   └── retro/*.md              # /scrum:retro
│
├── gemini-reports/*.md         # Gemini調査
│
└── plans/*.md                  # EnterPlanMode
```

---

## Tips

### コマンドの組み合わせ

複数のコマンドを連続して使うことで効果的:

```
# PBI作成フロー
/scrum:spike 決済ドメイン → /scrum:pbi-draft 決済機能

# 実装フロー
/plan:clarify → EnterPlanMode → 実装 → /code:review-uncommited
```

### 引数の省略

多くのコマンドは引数なしでも動作し、対話的に情報を収集:

```
/goal:setup        # 対話で情報収集
/scrum:pbi-draft   # 対話でPO要望をヒアリング
```

### 過去の成果物の参照

各コマンドは過去の出力を参照可能:

```
/goal:review 2026-02  # 先月の振り返りを踏まえて
/scrum:retro Sprint 3 # 前回のアクションを確認
```
