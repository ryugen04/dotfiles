---
name: spike
description: Use when domain knowledge investigation is needed before PBI refinement. Delegates to Gemini MCP for comprehensive research.
allowed-tools: Read, Write, mcp__gemini-cli__ask-gemini
---

# ドメイン調査 (Spike)

PBI精緻化の前提となるドメイン知識や技術調査を実施する。
大規模な調査はGemini MCPに委託し、結果を構造化してまとめる。

## Spikeとは

スクラムにおけるSpikeは、不確実性を減らすための調査タスク。
- タイムボックス付き（通常2〜4時間、最大1日）
- 成果物は「知識」であり「動くコード」ではない
- PBIを精緻化するための情報を得ることが目的

## 入力

1. **調査テーマ**: 何を調べるか
2. **調査目的**: なぜ調べるか（どのPBIのため等）
3. **タイムボックス**: 調査に費やす時間の上限
4. **調査の種類**:
   - ドメイン知識（業務知識、業界用語等）
   - 技術調査（ライブラリ選定、実現可能性等）
   - 競合調査（他サービスの実装等）

## 処理手順

### Step 1: 調査計画
- 調査の問いを明確化
- 調べる情報源の特定
- タイムボックスの確認

### Step 2: Gemini MCPへの委託

**ドメイン知識調査の場合:**
```
web searchを使って {トピック} について調査し、結果を報告してください。

## 調査内容
{具体的な問い}

## 出力ルール
- 発見した情報全てを列挙（省略禁止）
- 各情報に必ずソースURLを付ける
- 推測・私見は書かない
```

**コードベース調査の場合:**
```
@{関連ファイル} について以下を調査してください。

## 調査内容
{具体的な問い}

## 出力ルール
- 発見した全件を列挙
- ファイルパス:行番号を付ける
- 推測・私見は書かない
```

### Step 3: 結果の構造化
Geminiの出力を、PBI精緻化に使える形式に整理。

## 出力フォーマット

```markdown
# Spike: {日本語トピック}

## 概要
- **調査日**: {YYYY-MM-DD}
- **タイムボックス**: {N}時間
- **目的**: {関連するPBI名、または調査の目的}

## 調査の問い
1. {問い1}
2. {問い2}

## 調査結果

### {問い1}への回答
#### 発見事項1: {タイトル}
- **ソース**: {URL または ファイル:行番号}
- **内容**: {事実のみ}
- **引用**: "{該当箇所}"

#### 発見事項2: {タイトル}
...

### {問い2}への回答
...

## PBI精緻化への示唆
- {調査結果がPBI定義にどう影響するか}
- {追加すべきAC}
- {考慮すべき技術的制約}
- {スコープの見直し提案}

## 残課題
- {更なる調査が必要な点}
- {次のSpikeへの引き継ぎ事項}

## 参考リンク
- {調査中に見つけた有用なリソース}
```

## 保存先

```
.claude/scrum/domain/{YYYYMMDD}-{日本語トピック}.md
```

**注意:** このファイルはプロジェクト固有です。
プロジェクトルートの相対パスで保存されます。

例: `.claude/scrum/domain/20260118-決済ドメイン基礎知識.md`

## Spikeの完了条件

- 調査の問いに対する回答が得られた
- PBI精緻化に十分な情報が揃った
- または、タイムボックスを消費した

タイムボックス内に結論が出なかった場合:
- 「わからなかった」という結果も成果
- 追加Spikeの必要性を明記
- 仮説を立ててPBIを進める判断も可能
