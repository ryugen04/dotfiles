---
name: gemini
description: Use when delegating tasks to Gemini MCP. Two main use cases: (1) large-scale codebase investigation with @ syntax, (2) web search for latest information. Also for long log analysis, context optimization. Always request concrete report format without omissions or personal opinions.
---

# Gemini MCP 活用ガイド

2つの主要用途がある。責務とやり方が異なるため、混同しないこと。

## レポート品質基準（両用途共通）

**必須:**
- 省略禁止: 「他にも...」「同様に...」「など」で逃げない
- 私見禁止: 推測・解釈・提案を書かない。事実のみ
- 具体性: 必ず引用元（ファイル:行番号 or URL）を付ける
- 網羅性: 発見した全件を列挙する

**禁止:**
- 「〜と思われます」「おそらく」「〜かもしれない」
- 「詳細は省略」「以下略」「多数あり」
- 「〜すべき」「〜を推奨」（私見）

---

## 用途1: コード調査

大規模コードベースの調査。100万トークンウィンドウを活用。

### いつ使う
- 複数ファイルにまたがる調査
- 呼び出し元・依存関係の追跡
- パターンの網羅的な検索

### プロンプトテンプレート

```
@src/xxx @src/yyy について以下を調査し、結果を .claude/gemini-reports/{トピック}-{YYYYMMDD-HHMM}.md に書き出してください。

## 調査内容
[具体的な質問]

## 出力ルール
- 発見した全件を列挙（省略禁止）
- 各発見に必ず ファイルパス:行番号 を付ける
- コードの該当箇所を引用する
- 推測・私見は書かない。コードから読み取れる事実のみ
- 「など」「他にも」で逃げない

## 出力フォーマット
# {調査タイトル}
調査日時: YYYY-MM-DD HH:MM
対象ファイル: [一覧]

## 発見事項
### 1. [発見タイトル]
- ファイル: path/to/file.ts:42
- コード:
  ```
  [該当コード]
  ```
- 事実: [コードから読み取れる事実のみ]

### 2. [発見タイトル]
...（全件列挙）

## サマリー
- [事実の箇条書き、3-5項目]
```

---

## 用途2: Web検索

Google Search Groundingによる最新情報の調査。

### いつ使う
- 公式ドキュメントの最新情報
- ライブラリのバージョン・変更点
- ベストプラクティスの調査

### プロンプトテンプレート

```
web searchを使って[トピック]について調査し、結果を .claude/gemini-reports/{トピック}-{YYYYMMDD-HHMM}.md に書き出してください。

## 調査内容
[具体的な質問]

## 出力ルール
- 発見した情報全てを列挙（省略禁止）
- 各情報に必ずソースURLを付ける
- 公式ドキュメントを優先、非公式は明記
- 推測・私見は書かない。ソースに書いてある事実のみ
- 「など」「他にも」で逃げない

## 出力フォーマット
# {調査タイトル}
調査日時: YYYY-MM-DD HH:MM
検索クエリ: [使用したクエリ]

## 発見事項
### 1. [発見タイトル]
- ソース: [URL]
- 情報種別: 公式ドキュメント / ブログ / GitHub Issue 等
- 内容: [ソースに書いてある事実のみ]
- 引用: "[該当箇所の引用]"

### 2. [発見タイトル]
...（全件列挙）

## サマリー
- [事実の箇条書き、3-5項目]
```

---

## 出力先

```
.claude/gemini-reports/
```

このディレクトリは `.gitignore` に追加すること。

---

## 利用可能なツール

| ツール | 用途 |
|--------|------|
| `ask-gemini` | プロンプト送信、ファイル分析（@構文）、Web検索 |
| `brainstorm` | アイデア生成（レポート形式ではない） |

---

## 委託判断フロー

1. 外部の最新情報が必要？ → **用途2: Web検索**
2. ローカルファイルの大量読み込み？ → **用途1: コード調査**
3. コンテキスト節約が重要？ → Gemini
4. ユーザー対話が必要？ → Claude Code直接対応

---

## その他の機能

### 編集提案モード
changeMode=trueで構造化された編集提案を取得。

```
prompt: "@src/api/users.ts エラーハンドリングを改善して"
changeMode: true
```

### コード実行（sandbox）
sandbox=trueでコードを安全に実行。

```
prompt: "このPythonスクリプトを実行して結果を教えて"
sandbox: true
```
