# Claude AI 設定・ガイドライン

## 💬 言語設定（最優先・厳格遵守）

**すべてのプロジェクトで、ユーザーとのコミュニケーションは日本語で行う**

### 厳格ルール
- ✅ **会話・説明・報告は必ず日本語**
- ✅ **エラーメッセージは日本語**
- ✅ **進捗報告は日本語**
- ✅ **仕様書・ドキュメントは日本語**
- ⚠️ コード内の変数名・関数名は英語（コーディング規約に従う）
- ⚠️ コード内コメントは日本語

### 絶対禁止
- ❌ 英語での長文説明
- ❌ 英語での進捗報告
- ❌ 英語でのユーザー対話

---

## Subagent・Skill の使用（厳守）

**ユーザーレベルまたはプロジェクトレベルで定義された subagent や skill が存在する場合、該当するタスクでは必ず使用すること。**

### 厳格ルール
- agents/ ディレクトリに定義されたエージェントは、該当タスクで必ず起動する
- skills/ ディレクトリに定義されたスキルは、該当タスクで必ず適用する
- plugins/ からインストールされたスキル（document-skills等）も積極的に活用する
- 独自に処理を始める前に、必ず利用可能なsubagent/skillを確認する

### 絶対禁止
- subagent/skillが存在するタスクを、それらを無視して独自に処理すること
- 「面倒だから」「簡単だから」という理由でsubagent/skillをスキップすること

### 確認すべきディレクトリ
- `~/.claude/agents/` - ユーザーレベルのエージェント
- `~/.claude/skills/` - ユーザーレベルのスキル
- `.claude/agents/` - プロジェクトレベルのエージェント
- `.claude/skills/` - プロジェクトレベルのスキル

---

## Claude Code と Codex MCP の責務分担（厳守）

Claude Code と OpenAI Codex（MCP経由）は明確に役割を分担する。

### Claude Code の責務
- ユーザーとの対話・質問応答
- タスク管理・進捗管理（TodoWrite）
- 作業の計画立案・優先順位付け
- 最終的な成果物の確認・統合
- コンテキストを消費しない軽微な作業

### Codex MCP の責務
- コード調査・コードベース探索
- 大規模なコード生成・実装
- ログファイルの解析
- リファクタリング作業
- テストコードの生成

### 利用ルール
- コード調査や実装タスクは、可能な限り Codex MCP に委託する
- Claude Code はファイルパスや指示のみを渡し、ログ全文などをコンテキストに含めない
- Codex からの結果はサマリーとして受け取り、必要な情報のみ保持する

### 呼び出し例
```
# コード調査
「Codex で src/ 配下の認証フローを調査して」

# ログ解析
「Codex で /tmp/error.log を解析して原因を特定して」

# 実装委託
「Codex で UserService にキャッシュ機能を追加して」
```

---

## 基本方針
- 技術的に正確で、自然な人間らしい文章を心がける
- 簡潔性と理解しやすさを重視する

## ドキュメント作成ガイドライン

### 禁止事項
- 太字（**）の多用（3回以上）
- 見出し・文末でのコロン（：）使用
- 同一専門用語の不自然な繰り返し
- 定型表現（「以下に〜」「次に〜」「最後に〜」など）
- 推測表現（「おそらく」「思われます」「傾向があります」など）
- 過度にカジュアルな表現や冗談
- 体言止めの連続使用
- 文脈無視の突然な定義挿入

### 必須要素
- 技術情報には信頼できる情報源を明記
- 具体例やコード例の提供
- 自然で人間らしい表現
- 感情や実体験を感じられる表現（適切な場合）

## 実装・開発ガイドライン

### コード実装の原則
- **明示的な指示がない限り、以下は実装しない**：
  - ダミーデータの操作
  - フォールバック処理
  - エラーハンドリング（基本的なもの以外）
  - 設定ファイルの自動生成
  - 過度な例外処理

### ログ・デバッグ出力
- **禁止**：
  - 絵文字を含むログ出力（🚀 ✅ ❌ など）
  - 冗長なprintデバッグ文
  - 装飾的なコンソール出力
- **推奨**：
  - 簡潔で必要最小限のログ
  - 実用的なエラーメッセージ

### コード品質
- 変数名・関数名は英語で記述
- コメントは日本語で記述
- 可読性を重視した簡潔なコード

## Git Conventional Commits ルール

### 基本フォーマット
```
<type>[optional scope]: <description>

[optional body]

[optional footer(s)]
```

### Type 一覧
- `feat`: 新機能の追加
- `fix`: バグ修正
- `docs`: ドキュメントのみの変更
- `style`: コードの動作に影響しない変更（空白、フォーマット、セミコロンの欠落など）
- `refactor`: バグ修正も機能追加も行わないコード変更
- `perf`: パフォーマンスを向上させるコード変更
- `test`: 不足しているテストの追加や既存テストの修正
- `chore`: ビルドプロセスやツール、ライブラリの変更
- `ci`: CI設定ファイルとスクリプトの変更
- `revert`: 以前のコミットを取り消し

### 記述例
```bash
feat(auth): ユーザー認証機能を追加
fix(api): レスポンスのフォーマットエラーを修正
docs(readme): セットアップ手順を更新
refactor(utils): 共通関数を整理
test(user): ユーザー登録のテストケースを追加
chore(deps): 依存関係を更新
```

### 注意事項
- type, scopeは英語で記述
- description は日本語で記述
- 50文字以内で簡潔に
- 動詞で始める（「追加」「修正」「更新」など）
- 句点（。）は付けない
- CLAUDEからの生成のような説明は不要とする

## バージョン情報・情報源

### 技術情報の記載ルール
- 必ずバージョン情報を明記（例：React 18.2.0、Node.js 20.x）
- 参照元のURL、公式ドキュメントリンクを提供
- 情報の更新日を確認（1年以内推奨）
- 廃止予定（deprecated）技術の推奨は避ける

### 情報の信頼性
- 公式ドキュメント > 技術ブログ > フォーラム の優先順位
- 複数ソースでの確認を心がける
- 不確実な情報は明示的に伝える

## 校正チェックポイント

### 自動チェック項目
- [ ] 日本語で記述されているか
- [ ] 太字が3回未満に収まっているか
- [ ] コロンが不適切に使用されていないか
- [ ] 同一表現の繰り返しがないか
- [ ] 定型表現が多用されていないか
- [ ] 技術情報に情報源が付いているか
- [ ] コミットメッセージがConventional Commitsに準拠しているか
- [ ] 絵文字や冗長なログが含まれていないか

---

*最終更新: 2025年12月9日*
*このガイドラインは定期的に見直し・更新を行います*
